(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{6648:(e,t,r)=>{Promise.resolve().then(r.bind(r,7320))},7320:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5155),i=r(2115),a=r(8999);function o(){let e=(0,a.useSearchParams)(),[t,r]=(0,i.useState)("loading"),[o,n]=(0,i.useState)(""),[l,c]=(0,i.useState)(null),d=(0,i.useCallback)(async()=>{try{let t=e.get("token");if(!t){r("error"),n("No verification token found in URL");return}r("loading");let s=new AbortController,i=setTimeout(()=>s.abort(),1e4);try{let e=await fetch("".concat("https://api.doctalkhealth.com","/api/auth/verify-email?token=").concat(encodeURIComponent(t)),{method:"POST",headers:{"Content-Type":"application/json"},signal:s.signal});clearTimeout(i);let a=await e.json();if(!e.ok)throw Error(a.message||"Verification failed");if(a.success)r("success"),n(a.message||"Email verified successfully!"),a.userId&&c(a.userId),setTimeout(()=>{let e=a.userId?"doctalk://verified?userId=".concat(a.userId):"doctalk://verified";window.location.href=e},2e3);else throw Error(a.message||"Verification failed")}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw Error("Verification request timed out. Please try again.");throw e}}catch(e){console.error("Verification error:",e),r("error"),n(e instanceof Error?e.message:"Failed to verify email. Please try again.")}},[e]);return(0,i.useEffect)(()=>{d()},[d]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom, #000000 0%, #11182A 40%, #03045e 70%, #0077B6 100%)"},children:(0,s.jsxs)("div",{className:"text-center p-8 rounded-lg",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold mb-6",style:{color:"white"},children:[(0,s.jsx)("span",{style:{color:"#FF4444"},children:"Doc"}),(0,s.jsx)("span",{style:{color:"#0077B6"},children:"Talk"})," Email Verification"]}),(0,s.jsxs)("div",{className:"mt-8",children:["loading"===t&&(0,s.jsxs)("div",{className:"text-white",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white mb-4"}),(0,s.jsx)("div",{className:"text-xl",children:"Verifying your email..."})]}),"success"===t&&(0,s.jsxs)("div",{className:"text-green-400 text-xl",children:[o,(0,s.jsx)("p",{className:"mt-4 text-white text-base",children:"Redirecting you back to the app..."})]}),"error"===t&&(0,s.jsxs)("div",{className:"text-red-400",children:[(0,s.jsx)("div",{className:"text-xl mb-4",children:o}),(0,s.jsx)("button",{onClick:d,className:"px-4 py-2 bg-[#0077B6] text-white rounded hover:bg-[#0066a1] transition-colors",children:"Try Again"})]})]})]})})}function n(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(o,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(6648)),_N_E=e.O()}]);